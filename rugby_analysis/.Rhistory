library(purrr)
library(RMySQL)
paths_allowed("https://www.rugbypass.com/super-rugby-aotearoa/matches/")
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
paths_allowed("https://www.rugbypass.com/super-rugby-aotearoa/matches/")
library(robotstxt)
library(rvest)
library(selectr)
library(xml2)
library(dplyr)
library(stringr)
library(forcats)
library(magrittr)
library(tidyr)
library(ggplot2)
library(lubridate)
library(tibble)
library(purrr)
library(RMySQL)
paths_allowed("https://www.rugbypass.com/super-rugby-aotearoa/matches/")
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
# Check if bots are allowed on website. If TRUE then okay to proceed
paths_allowed("https://www.rugbypass.com/super-rugby-aotearoa/matches/")
# Get html of rugby pass matches website
rPassMatches <- read_html("https://www.rugbypass.com/super-rugby-aotearoa/matches/")
rPassMatches %>% html_nodes("div.games")
rPassMatches %>% html_nodes("div.games") %>% html_nodes("itemscope")
rPassMatches %>% html_nodes("div.games") %>% html_nodes(".itemscope")
rPassMatches %>% html_nodes("div.games") %>% html_nodes("div itemscope")
rPassMatches %>% html_nodes("div.games")
cat(rPassMatches %>% html_nodes("div.games"))
rPassMatches %>% html_nodes("div.games")
rPassMatches %>% html_nodes("div.games") %>% html_attrs()
rPassMatches %>% html_nodes("div.games") %>% html_children()
number_of_rounds <- rPassMatches %>% html_nodes("div.games") %>% html_children()
number_of_rounds <- length(rPassMatches %>% html_nodes("div.games") %>% html_children())
number_of_rounds
rPassMatches %>% html_nodes("div.games") %>% html_nodes()
rPassMatches %>% html_nodes("div.games") %>% html_nodes("itemscope")
rPassMatches %>% html_nodes("div.games") %>% html_node("#itemscope")
rPassMatches %>% html_nodes("div.games") %>% html_node("div[itemscope]")
# id, date
rPassMatches %>% html_nodes("div.games") %>% html_node("div[itemscope]") %>% html_attrs()
# id, date
rPassMatches %>% html_nodes("div.games") %>% html_node("div[itemscope]") %>% html_attr("data-id")
# date
rPassMatches %>% html_nodes("div.games") %>% html_node("div[itemscope]") %>% html_attr("data-date")
rPassMatches %>% html_nodes("div.games") %>% html_children()
rPassMatches %>% html_nodes("div.games") %>% html_children(2)
rPassMatches %>% html_nodes("div.games") %>% html
rPassMatches %>% html_nodes("div.games") %>% html_children()[2]
# date
match_date <- rPassMatches %>% html_nodes("div.games") %>% html_node("meta[itemprop]")
# date
rPassMatches %>% html_nodes("div.games") %>% html_node("meta[itemprop]")
# date
rPassMatches %>% html_nodes("div.games") %>% html_node("meta[itemprop].startDate")
# date
rPassMatches %>% html_nodes("div.games") %>% html_node("meta.startDate")
# date
rPassMatches %>% html_nodes("div.games") %>% html_node("meta[itemprop]#startDate")
# date
rPassMatches %>% html_nodes("div.games") %>% html_node("meta[itemprop]")
# date
rPassMatches %>% html_nodes("div.games") %>% html_node("meta[itemprop]") %>% hmtl_attr("content")
# date
rPassMatches %>% html_nodes("div.games") %>% html_node("meta[itemprop]") %>% html_attr("content")
# date
rPassMatches %>% html_nodes("div.games") %>% html_node("meta[itemprop=startDate]")
# date
rPassMatches %>% html_nodes("div.games") %>% html_node("meta[itemprop=startDate]") %>% html_attr("content")
rPassMatches %>% html_nodes("div.games") %>% html_children()
# home team
rPassMatches %>% html_nodes("div.games")
# home team
rPassMatches %>% html_nodes("div.games") %>% html_node("span[itemprop=hometeam]")
# home team
rPassMatches %>% html_nodes("div.games") %>% html_node("span.itemprop=hometeam")
# home team
rPassMatches %>% html_nodes("div.games") %>% html_node("span.itemprop")
# home team
rPassMatches %>% html_nodes("div.games") %>% html_node("span[itemprop]")
# home team
rPassMatches %>% html_nodes("div.games") %>% html_node("span[itemprop]") %>% html_children()
# home team
rPassMatches %>% html_nodes("div.games") %>% html_node("span.teams") %>% html_children()
# home team
rPassMatches %>% html_nodes("div.games") %>% html_node("span.teams") %>% html_node("span[itemprop=hometeam]")
# home team
rPassMatches %>% html_nodes("div.games") %>% html_node("span.teams") %>% html_node("span[itemprop=homeTeam]")
# home team
rPassMatches %>% html_nodes("div.games") %>% html_node("span.teams") %>% html_node("span[itemprop=homeTeam]") %>% html_attr()
# home team
rPassMatches %>% html_nodes("div.games") %>% html_node("span.teams") %>% html_node("span[itemprop=homeTeam]") %>% html_attrs()
# home team
rPassMatches %>% html_nodes("div.games") %>% html_node("span.teams") %>% html_node("span[itemprop=homeTeam]") %>% html_children()
# home team
rPassMatches %>% html_nodes("div.games") %>% html_node("span.teams") %>% html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name team-link")
# home team
rPassMatches %>% html_nodes("div.games") %>% html_node("span.teams") %>% html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name")
# home team
rPassMatches %>% html_nodes("div.games") %>% html_node("span.teams") %>% html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name") %>% html_text()
# home team
rPassMatches %>% html_nodes("div.games") %>% html_node("span.teams") %>%
html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name") %>% html_text() %>% str_trim()
# home score
# away team
rPassMatches %>% html_nodes("div.games") %>% html_node("span.teams") %>%
html_node("span[itemprop=awayTeam]") %>% html_nodes("a.name") %>% html_text() %>% str_trim()
# home score
rPassMatches %>% html_nodes("div.games") %>% html_node("span.teams") %>%
html_nodes("span.home")
# home score
rPassMatches %>% html_nodes("div.games") %>% html_node("span.teams") %>%
html_nodes("span.home") %>% html_text()
# away score
rPassMatches %>% html_nodes("div.games") %>% html_node("span.teams") %>%
html_nodes("span.away") %>% html_text()
rPassMatches %>% html_nodes("div.games") %>% html_children()
rPassMatches %>% html_nodes("div.games") %>% html_children()[]
rPassMatches %>% html_nodes("div.games") %>% html_children()[0]
rPassMatches %>% html_nodes("div.games") %>% html_children()[10]
class(rPassMatches %>% html_nodes("div.games") %>% html_children())
class(rPassMatches %>% html_nodes("div.games") %>% html_children())[[1]]
rPassMatches %>% html_nodes("div.games") %>% html_children()[[1]]
rPassMatches %>% html_nodes("div.games") %>% html_children()
rPassMatches %>% html_nodes("div.games") %>% html_children([1])
rPassMatches %>% html_nodes("div.games") %>% html_children(x)
rPassMatches %>% html_nodes("div.games") %>% html_children()
as.list(rPassMatches %>% html_nodes("div.games") %>% html_children())
as.list(rPassMatches %>% html_nodes("div.games") %>% html_children())[1]
as.list(rPassMatches %>% html_nodes("div.games") %>% html_children())[10]
rPassMatches <- as.list(rPassMatches %>% html_nodes("div.games") %>% html_children())[10]
# id
match_id <- rPassMatches %>% html_nodes("div.games") %>% html_node("div[itemscope]") %>% html_attr("data-id")
# date
match_date <- rPassMatches %>% html_nodes("div.games") %>% html_node("meta[itemprop=startDate]") %>% html_attr("content")
rPassMatches <- as.list(rPassMatches %>% html_nodes("div.games") %>% html_children())[1]
rPassMatches
# Get html of rugby pass matches website
rPassMatches <- read_html("https://www.rugbypass.com/super-rugby-aotearoa/matches/")
as.list(rPassMatches %>% html_nodes("div.games") %>% html_children())[1]
as.list(rPassMatches %>% html_nodes("div.games") %>% html_children())
rPassMatches_tmp <- as.list(rPassMatches %>% html_nodes("div.games") %>% html_children())[5]
# id
match_id <- rPassMatches_tmp %>% html_node("div[itemscope]") %>% html_attr("data-id")
# id
match_id <- rPassMatches_tmp %>% html_node("div[itemscope]") %>% html_attr("data-id")
# date
match_date <- rPassMatches_tmp %>% html_node("meta[itemprop=startDate]") %>% html_attr("content")
# home team
home_team <- rPassMatches_tmp %>% html_node("span.teams") %>%
html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name") %>% html_text() %>% str_trim()
# home score
home_team_score <- rPassMatches_tmp %>% html_node("span.teams") %>% html_nodes("span.home") %>% html_text()
# away team
away_team <- rPassMatches_tmp %>% html_node("span.teams") %>%
html_node("span[itemprop=awayTeam]") %>% html_nodes("a.name") %>% html_text() %>% str_trim()
# away score
away_team_score <- rPassMatches_tmp %>% html_node("span.teams") %>% html_nodes("span.away") %>% html_text()
rPassMatchesRounds <- as.list(rPassMatches %>% html_nodes("div.games") %>% html_children())
rPassMatchesRounds <- as.list(rPassMatches %>% html_nodes("div.games") %>% html_children())
for(round in rPassMatchesRounds){
print(rPassMatchesRounds %>% html_node("div[itemscope]") %>% html_attr("data-id"))
}
for(round in rPassMatchesRounds){
print(rPassMatchesRounds[round] %>% html_node("div[itemscope]") %>% html_attr("data-id"))
}
for(round in rPassMatchesRounds){
print(round %>% html_node("div[itemscope]") %>% html_attr("data-id"))
}
for(round in rPassMatchesRounds){
print(round %>% html_children())
}
rPassMatchesRounds <- as.list(rPassMatches %>% html_nodes("div.games") %>% html_children())
for(round in rPassMatchesRounds){
print(round %>% html_node("div[itemscope]") %>% html_attr("data-id"))
}
for(round in rPassMatchesRounds){
print(round %>% html_node("div[itemscope]") %>% html_attrs("data-id"))
}
for(round in rPassMatchesRounds){
print(round %>% html_node("div[itemscope]"))
}
print(round %>% html_node("div[itemscope]") %>% html_attrs())
for(round in rPassMatchesRounds){
print(round %>% html_node("div[itemscope]") %>% html_attr("data-id"))
}
for(round in rPassMatchesRounds){
print(round %>% html_node("div[itemscope]") %>% xml_find_all("data-id"))
}
print(round %>% html_node("div[itemscope]") %>% xml_find_all("//data-id"))
for(round in rPassMatchesRounds){
print(round %>% html_node("div[itemscope]") %>% xml_find_all("//data-id"))
}
for(round in rPassMatchesRounds){
print(round %>% html_node("div[itemscope]") %>% xml_find_all(".//data-id"))
}
for(round in rPassMatchesRounds){
print(round %>% html_node("div[itemscope]") %>% xml_find_all(".//@data-id"))
}
for(round in rPassMatchesRounds){
print(round %>% html_node("div[itemscope]") %>% xml_find_all("@data-id"))
}
print(round %>% html_node("div[itemscope]") %>% html_nodes("data-id"))
for(round in rPassMatchesRounds){
print(round %>% html_node("div[itemscope]") %>% html_nodes("data-id"))
}
print(round %>% html_node("div[itemscope]") %>% html_node("data-id"))
for(round in rPassMatchesRounds){
print(round %>% html_node("div[itemscope]") %>% html_node("data-id"))
}
for(round in rPassMatchesRounds){
print(round %>% html_node("div[itemscope]") %>% html_node("div.date-header"))
}
for(round in rPassMatchesRounds){
print(round %>% html_node("div[itemscope]") %>% html_nodes("div.date-header"))
}
for(round in rPassMatchesRounds){
print(round %>% html_nodes("div.date-header"))
}
print(round %>% html_nodes("div.date-header") %>% html_text())
for(round in rPassMatchesRounds){
print(round %>% html_nodes("div.date-header") %>% html_text())
}
for(round in rPassMatchesRounds){
print(round %>% html_node("div[itemscope]") %>% html_text())
}
print(round %>% html_nodes("div[itemscope]") %>% html_text())
for(round in rPassMatchesRounds){
print(round %>% html_nodes("div[itemscope]") %>% html_text())
}
for(round in rPassMatchesRounds){
print(rPassMatches_tmp %>% html_nodes("div[itemscope]") %>% html_attr("data-id"))
}
for(round in rPassMatchesRounds){
print(round %>% html_nodes("div[itemscope]") %>% html_attr("data-id"))
}
for(round in rPassMatchesRounds){
# match id
print(round %>% html_nodes("div[itemscope]") %>% html_attr("data-id"))
# match date
print(round %>% html_nodes("meta[itemprop=startDate]") %>% html_attr("content"))
}
for(round in rPassMatchesRounds){
# match id
print(round %>% html_nodes("div[itemscope]") %>% html_attr("data-id"))
# match date
print(round %>% html_nodes("meta[itemprop=startDate]") %>% html_attr("content"))
# home team
print(round %>% html_node("span.teams") %>%
html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name") %>% html_text() %>% str_trim())
}
for(round in rPassMatchesRounds){
# match id
print(round %>% html_nodes("div[itemscope]") %>% html_attr("data-id"))
# match date
print(round %>% html_nodes("meta[itemprop=startDate]") %>% html_attr("content"))
# home team
print(round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name") %>% html_text() %>% str_trim())
}
for(round in rPassMatchesRounds){
# match id
print(round %>% html_nodes("div[itemscope]") %>% html_attr("data-id"))
# match date
print(round %>% html_nodes("meta[itemprop=startDate]") %>% html_attr("content"))
# home team
print(round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name") %>% html_text() %>% str_trim())
# home score
print(round %>% html_nodes("span.teams") %>% html_nodes("span.home") %>% html_text())
}
for(round in rPassMatchesRounds){
# match id
print(round %>% html_nodes("div[itemscope]") %>% html_attr("data-id"))
# match date
print(round %>% html_nodes("meta[itemprop=startDate]") %>% html_attr("content"))
# home team
print(round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name") %>% html_text() %>% str_trim())
# home score
print(round %>% html_nodes("span.teams") %>% html_nodes("span.home") %>% html_text())
# away team
print(round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=awayTeam]") %>% html_nodes("a.name") %>% html_text() %>% str_trim())
}
for(round in rPassMatchesRounds){
# match id
print(round %>% html_nodes("div[itemscope]") %>% html_attr("data-id"))
# match date
print(round %>% html_nodes("meta[itemprop=startDate]") %>% html_attr("content"))
# home team
print(round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name") %>% html_text() %>% str_trim())
# home score
print(round %>% html_nodes("span.teams") %>% html_nodes("span.home") %>% html_text())
# away team
print(round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=awayTeam]") %>% html_nodes("a.name") %>% html_text() %>% str_trim())
# away score
print(round %>% html_nodes("span.teams") %>% html_nodes("span.away") %>% html_text())
}
for(round in rPassMatchesRounds){
match_id <- round %>% html_nodes("div[itemscope]") %>% html_attr("data-id")
match_date <- round %>% html_nodes("meta[itemprop=startDate]") %>% html_attr("content")
home_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
home_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.home") %>% html_text(trim = TRUE)
away_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=awayTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
away_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.away") %>% html_text(trim = TRUE)
}
match_date
match_id
cbind(match_id, match_date)
cbind(match_id, match_date, home_team, home_score, away_team, away_team_score)
fixture_results <- data.frame()
fixture_results %>% rbind() %>% cbind(match_id, match_date, home_team, home_score, away_team, away_team_score)
fixture_results %>% rbind(cbind(match_id, match_date, home_team, home_score, away_team, away_team_score))
fixture_results <- data.frame()
rPassMatchesRounds <- as.list(rPassMatches %>% html_nodes("div.games") %>% html_children())
for(round in rPassMatchesRounds){
match_id <- round %>% html_nodes("div[itemscope]") %>% html_attr("data-id")
match_date <- round %>% html_nodes("meta[itemprop=startDate]") %>% html_attr("content")
home_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
home_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.home") %>% html_text(trim = TRUE)
away_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=awayTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
away_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.away") %>% html_text(trim = TRUE)
tmp <- cbind(match_id, match_date, home_team, home_score, away_team, away_team_score)
fixture_results <- fixture_results %>% rbind(tmp)
}
View(fixture_results)
View(fixture_results)
for(round in rPassMatchesRounds){
match_id <- round %>% html_nodes("div[itemscope]") %>% html_attr("data-id")
match_date <- round %>% html_nodes("meta[itemprop=startDate]") %>% html_attr("content")
home_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
home_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.home") %>% html_text(trim = TRUE)
away_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=awayTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
away_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.away") %>% html_text(trim = TRUE)
tmp <- cbind(match_id, match_date, home_team, home_score, away_team, away_team_score)
print(tmp)
}
for(round in rPassMatchesRounds){
match_id <- round %>% html_nodes("div[itemscope]") %>% html_attr("data-id")
match_date <- round %>% html_nodes("meta[itemprop=startDate]") %>% html_attr("content")
home_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
home_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.home") %>% html_text(trim = TRUE)
away_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=awayTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
away_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.away") %>% html_text(trim = TRUE)
tmp <- cbind(match_id, match_date, home_team, home_score, away_team, away_score)
print(tmp)
}
fixture_results <- data.frame()
rPassMatchesRounds <- as.list(rPassMatches %>% html_nodes("div.games") %>% html_children())
for(round in rPassMatchesRounds){
match_id <- round %>% html_nodes("div[itemscope]") %>% html_attr("data-id")
match_date <- round %>% html_nodes("meta[itemprop=startDate]") %>% html_attr("content")
home_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
home_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.home") %>% html_text(trim = TRUE)
away_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=awayTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
away_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.away") %>% html_text(trim = TRUE)
tmp <- cbind(match_id, match_date, home_team, home_score, away_team, away_score)
fixture_results <- fixture_results %>% rbind(tmp)
}
fixture_results <- data.frame()
rPassMatchesRounds <- as.list(rPassMatches %>% html_nodes("div.games") %>% html_children())
for(round in rPassMatchesRounds){
match_id <- round %>% html_nodes("div[itemscope]") %>% html_attr("data-id")
match_date <- round %>% html_nodes("meta[itemprop=startDate]") %>% html_attr("content")
home_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
home_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.home") %>% html_text(trim = TRUE)
away_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=awayTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
away_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.away") %>% html_text(trim = TRUE)
tmp <- cbind(match_id, match_date, home_team, home_score, away_team, away_score)
tmp
}
for(round in rPassMatchesRounds){
match_id <- round %>% html_nodes("div[itemscope]") %>% html_attr("data-id")
match_date <- round %>% html_nodes("meta[itemprop=startDate]") %>% html_attr("content")
home_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
home_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.home") %>% html_text(trim = TRUE)
away_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=awayTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
away_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.away") %>% html_text(trim = TRUE)
tmp <- cbind(match_id, match_date, home_team, home_score, away_team, away_score)
print(tmp)
}
rm(away_team_score)
rm(home_team_score)
rm(number_of_rounds)
rm(rPassMatches_tmp)
away_score
cbind(match_id, match_date, home_team, home_score, away_team, away_score)
is_empty(away_score)
if(is_empty(away_score)){
away_score <- vector(mode="character", length=2)
}
away_score
if(is_empty(away_score)){
away_score <- vector(mode="character", length=length(match_id))
}
for(round in rPassMatchesRounds){
match_id <- round %>% html_nodes("div[itemscope]") %>% html_attr("data-id")
match_date <- round %>% html_nodes("meta[itemprop=startDate]") %>% html_attr("content")
home_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
home_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.home") %>% html_text(trim = TRUE)
away_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=awayTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
away_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.away") %>% html_text(trim = TRUE)
if(is_empty(home_score)){
home_score <- vector(mode="character", length=length(match_id))
}
if(is_empty(away_score)){
away_score <- vector(mode="character", length=length(match_id))
}
tmp <- cbind(match_id, match_date, home_team, home_score, away_team, away_score)
print(tmp)
}
fixture_results <- data.frame()
rPassMatchesRounds <- as.list(rPassMatches %>% html_nodes("div.games") %>% html_children())
for(round in rPassMatchesRounds){
match_id <- round %>% html_nodes("div[itemscope]") %>% html_attr("data-id")
match_date <- round %>% html_nodes("meta[itemprop=startDate]") %>% html_attr("content")
home_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
home_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.home") %>% html_text(trim = TRUE)
away_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=awayTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
away_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.away") %>% html_text(trim = TRUE)
if(is_empty(home_score)){
home_score <- vector(mode="character", length=length(match_id))
}
if(is_empty(away_score)){
away_score <- vector(mode="character", length=length(match_id))
}
tmp <- cbind(match_id, match_date, home_team, home_score, away_team, away_score)
fixture_results <- fixture_results %>% rbind(tmp)
}
class(fixture_results$match_id)
class(fixture_results$match_date)
class(fixture_results$home_team)
class(fixture_results$home_score)
class(fixture_results$away_team)
class(fixture_results$away_score)
fixture_results$away_score <- as.integer(fixture_results$away_score)
fixture_results$match_date
as_datetime(fixture_results$match_date)
as.POSIXlt(fixture_results$match_date, tz="nz")
as.POSIXct(fixture_results$match_date, tz="nz")
as.POSIXct(fixture_results$match_date, format = "%Y-%m-%d %H:%M:" , tz="nz")
as.POSIXct(fixture_results$match_date, format = "%Y-%m-%d %H:%M" , tz="nz")
as.POSIXct(strptime(fixture_results$match_date, "%Y-%m-%d %H:%M:%S"))
as.POSIXct(strptime(fixture_results$match_date, "%Y-%m-%d %H:%M"))
as.POSIXct(strptime(fixture_results$match_date))
as.IDate(fixture_results$match_date) # Output is "2012-03-07"
as.ITime(fixture_results$match_date) # Output is "03:06:49"
library(data.table)
as.ITime(fixture_results$match_date) # Output is "03:06:49"
as.IDate(fixture_results$match_date) # Output is "2012-03-07"
as.POSIXct(fixture_results$match_date, format = "%Y-%m-%d %H:%M" , tz="nz", usetz=TRUE)
as.POSIXct(fixture_results$match_date, format = "%Y-%m-%d %H:%M" , tz="nz")
as.POSIXct(fixture_results$match_date , tz="nz")
as_datetime(fixture_results$match_date , tz="nz")
as_datetime(fixture_results$match_date , tz="NZ")
fixture_results$match_date <- as_datetime(fixture_results$match_date , tz="NZ")
fixture_results$match_date
i.Date(fixture_results$match_date)
I.Date(fixture_results$match_date)
IDate(fixture_results$match_date)
as.IDate(fixture_results$match_date)
as.ITime(fixture_results$match_date)
fixture_results <- data.frame()
rPassMatchesRounds <- as.list(rPassMatches %>% html_nodes("div.games") %>% html_children())
for(round in rPassMatchesRounds){
match_id <- round %>% html_nodes("div[itemscope]") %>% html_attr("data-id")
match_date <- round %>% html_nodes("meta[itemprop=startDate]") %>% html_attr("content")
home_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=homeTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
home_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.home") %>% html_text(trim = TRUE)
away_team <- round %>% html_nodes("span.teams") %>%
html_node("span[itemprop=awayTeam]") %>% html_nodes("a.name") %>% html_text(trim = TRUE)
away_score <- round %>% html_nodes("span.teams") %>% html_nodes("span.away") %>% html_text(trim = TRUE)
if(is_empty(home_score)){
home_score <- vector(mode="character", length=length(match_id))
}
if(is_empty(away_score)){
away_score <- vector(mode="character", length=length(match_id))
}
tmp <- cbind(match_id, match_date, home_team, home_score, away_team, away_score)
fixture_results <- fixture_results %>% rbind(tmp)
}
fixture_results$home_score <- as.integer(fixture_results$home_score)
fixture_results$away_score <- as.integer(fixture_results$away_score)
fixture_results$match_date <- as_datetime(fixture_results$match_date , tz="NZ")
fixture_results$match_time <- as.ITime(fixture_results$match_date)
fixture_results$match_date <- as.IDate(fixture_results$match_date)
colnames(fixture_results)
fixture_results <- fixture_results %>% select(match_id, match_date, match_time, home_team, home_score, away_team, away_score)
